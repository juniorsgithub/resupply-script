// Initializes the loadouts script.
// Exec this on launch.

// Respawn when changing loadouts (for resup bind).
tf_respawn_on_loadoutchanges 1

// Use these to switch between loadouts.
alias loadouts.A "loadouts.load.A; loadouts.resup; loadouts.set_logfile; echo loadouts.load.A; con_logfile ."
alias loadouts.B "loadouts.load.B; loadouts.resup; loadouts.set_logfile; echo loadouts.load.B; con_logfile ."
alias loadouts.C "loadouts.load.C; loadouts.resup; loadouts.set_logfile; echo loadouts.load.C; con_logfile ."
alias loadouts.D "loadouts.load.D; loadouts.resup; loadouts.set_logfile; echo loadouts.load.D; con_logfile ."

// Command to echo our info message.
alias loadouts "exec loadouts/echo"

// These update aliases based on current class.
alias loadouts.scout        "alias loadouts.set_logfile con_logfile cfg/loadouts.scout.txt       ; exec cfg/loadouts.scout.txt       ; echo [Loadouts] Scout loadout restored.   "
alias loadouts.soldier      "alias loadouts.set_logfile con_logfile cfg/loadouts.soldier.txt     ; exec cfg/loadouts.soldier.txt     ; echo [Loadouts] Soldier loadout restored. "
alias loadouts.pyro         "alias loadouts.set_logfile con_logfile cfg/loadouts.pyro.txt        ; exec cfg/loadouts.pyro.txt        ; echo [Loadouts] Pyro loadout restored.    "
alias loadouts.demoman      "alias loadouts.set_logfile con_logfile cfg/loadouts.demoman.txt     ; exec cfg/loadouts.demoman.txt     ; echo [Loadouts] Demoman loadout restored. "
alias loadouts.heavyweapons "alias loadouts.set_logfile con_logfile cfg/loadouts.heavyweapons.txt; exec cfg/loadouts.heavyweapons.txt; echo [Loadouts] Heavy loadout restored.   "
alias loadouts.engineer     "alias loadouts.set_logfile con_logfile cfg/loadouts.engineer.txt    ; exec cfg/loadouts.engineer.txt    ; echo [Loadouts] Engineer loadout restored."
alias loadouts.medic        "alias loadouts.set_logfile con_logfile cfg/loadouts.medic.txt       ; exec cfg/loadouts.medic.txt       ; echo [Loadouts] Medic loadout restored.   "
alias loadouts.sniper       "alias loadouts.set_logfile con_logfile cfg/loadouts.sniper.txt      ; exec cfg/loadouts.sniper.txt      ; echo [Loadouts] Sniper loadout restored.  "
alias loadouts.spy          "alias loadouts.set_logfile con_logfile cfg/loadouts.spy.txt         ; exec cfg/loadouts.spy.txt         ; echo [Loadouts] Spy loadout restored.     "

echo [Loadouts] Pruning save files...

// Clear controller bindings.
sixense_clear_bindings

// Make load commands instead write to the save file.
alias loadouts.load.A "alias loadouts.last echo loadouts.load.A"
alias loadouts.load.B "alias loadouts.last echo loadouts.load.B"
alias loadouts.load.C "alias loadouts.last echo loadouts.load.C"
alias loadouts.load.D "alias loadouts.last echo loadouts.load.D"

// Set to loadout A by default. This will get eventually get overwritten by the last statement in the loadout file.
alias loadouts.last echo loadouts.load.A

// Load saved state.
exec loadouts.scout.txt
// Overwrite saved loadouts with an empty file.
sixense_write_bindings loadouts.scout.txt
// Set console log path to the save file.
con_logfile cfg/loadouts.scout.txt
// Echoes just the last loadout in the save file.
loadouts.last
// Done saving, stop logging.
con_logfile ""

// Repeat for all other classes.

alias loadouts.last echo loadouts.load.A
exec loadouts.soldier.txt
sixense_write_bindings loadouts.soldier.txt
con_logfile cfg/loadouts.soldier.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.pyro.txt
sixense_write_bindings loadouts.pyro.txt
con_logfile cfg/loadouts.pyro.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.demoman.txt
sixense_write_bindings loadouts.demoman.txt
con_logfile cfg/loadouts.demoman.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.heavyweapons.txt
sixense_write_bindings loadouts.heavyweapons.txt
con_logfile cfg/loadouts.heavyweapons.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.engineer.txt
sixense_write_bindings loadouts.engineer.txt
con_logfile cfg/loadouts.engineer.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.medic.txt
sixense_write_bindings loadouts.medic.txt
con_logfile cfg/loadouts.medic.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.sniper.txt
sixense_write_bindings loadouts.sniper.txt
con_logfile cfg/loadouts.sniper.txt
loadouts.last
con_logfile ""

alias loadouts.last echo loadouts.load.A
exec loadouts.spy.txt
sixense_write_bindings loadouts.spy.txt
con_logfile cfg/loadouts.spy.txt
loadouts.last
con_logfile ""

// Restore controller bindings.
exec sixense_bindings

// These set the current active loadout.
alias loadouts.load.A "alias loadouts.resup load_itempreset 0; loadouts.cfg.A; echo [Loadouts] Active loadout: A"
alias loadouts.load.B "alias loadouts.resup load_itempreset 1; loadouts.cfg.B; echo [Loadouts] Active loadout: B"
alias loadouts.load.C "alias loadouts.resup load_itempreset 2; loadouts.cfg.C; echo [Loadouts] Active loadout: C"
alias loadouts.load.D "alias loadouts.resup load_itempreset 3; loadouts.cfg.D; echo [Loadouts] Active loadout: D"

// Console message.
echo [Loadouts] Loadouts have been loaded.
